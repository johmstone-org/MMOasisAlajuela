@model IEnumerable<ET.MusicSheets>

@using GridMvc.Html;

@{
    ViewBag.Title = "Partituras";
}
<link href="~/Content/Gridmvc.css" rel="stylesheet" />
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="~/Scripts/gridmvc.min.js"></script>
<script type="text/javascript">
    function OpenLink(link) {
        var url = link;
        window.open(url, '_blank');
    }
</script>

<h2>@ViewBag.Title - @ViewBag.SongName</h2>


<div>
    <hr />
    <p>
        @Html.ActionLink("Agregar partitura", "CreatebySong", new { SongID = ViewBag.SongID }, new { @class="button small"})
    </p>
    <div style="width: 90%; font-size: 15px;">
        @Html.Grid(Model).Columns(Columns =>
   {
       Columns.Add(c => c.MSTypesData.MSTypeName).Titled("Tipo").Filterable(true);
       Columns.Add(c => c.InstrumentsData.Instrument).Titled("Instrumento").Filterable(true);
       //Columns.Add()
       //         .Encoded(false)
       //         .Sanitized(false)
       //         .RenderValueAs(c => c.Version.Length == 0 ? Html.ActionLink("Agregar version", "Update", new { id = c.MSID }): new HtmlString("<p></p>")).Titled("Versión").Filterable(true);
       Columns.Add()
        .Titled("Versión")
        .Encoded(false)
        .Sanitized(false)
        .RenderValueAs(c =>c.Version == "NV" ? new HtmlString("<p>No disponible</p>") : new HtmlString("<a id='OpenLink' href='#' onclick='OpenLink(" + c.Version.ToString() + ");'>Ver versión</a>"));
       Columns.Add(c => c.Tonality).Titled("Tonalidad").Filterable(true);
       Columns.Add(c => c.FileName).Titled("Nombre del archivo").Filterable(true);
       Columns.Add()
                .Encoded(false)
                .Sanitized(false)
                .RenderValueAs(c => Html.ActionLink("Descargar", "DownLoadFile", new { id = c.MSID }));
   }).WithPaging(10).Sortable(true)
    </div>
</div>